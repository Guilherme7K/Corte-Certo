{% extends "base.html" %}

{% block content %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow">
                <div class="card-body p-5">
                    <h2 class="text-center mb-4">
                        <i class="bi bi-person-plus"></i> Cadastro
                    </h2>
                    <form method="POST" id="formCadastro">
                        <div class="mb-3">
                            <label for="nome" class="form-label">Nome Completo *</label>
                            <input type="text" class="form-control" id="nome" name="nome" required minlength="3" maxlength="100">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="email" name="email" required maxlength="120">
                        </div>
                        <div class="mb-3">
                            <label for="telefone" class="form-label">Telefone</label>
                            <input type="tel" class="form-control" id="telefone" name="telefone" placeholder="(11) 98765-4321" maxlength="20">
                        </div>
                        <div class="mb-3">
                            <label for="senha" class="form-label">Senha *</label>
                            <input type="password" class="form-control" id="senha" name="senha" required minlength="8">
                            <small class="text-muted">Mínimo 8 caracteres, com letra maiúscula, minúscula e número</small>
                        </div>
                        <div class="mb-3">
                            <label for="confirmar_senha" class="form-label">Confirmar Senha *</label>
                            <input type="password" class="form-control" id="confirmar_senha" name="confirmar_senha" required minlength="8">
                        </div>
                        <div class="alert alert-info">
                            <small>
                                <strong>Requisitos de senha:</strong><br>
                                • Mínimo 8 caracteres<br>
                                • Pelo menos 1 letra maiúscula<br>
                                • Pelo menos 1 letra minúscula<br>
                                • Pelo menos 1 número
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Cadastrar</button>
                    </form>
                    <hr class="my-4">
                    <p class="text-center mb-0">
                        Já tem uma conta? <a href="{{ url_for('login') }}">Faça login aqui</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('formCadastro').addEventListener('submit', function(e) {
    const senha = document.getElementById('senha').value;
    const confirmarSenha = document.getElementById('confirmar_senha').value;
    
    if (senha !== confirmarSenha) {
        e.preventDefault();
        alert('As senhas não coincidem!');
        return false;
    }
    
    // Validar senha forte
    if (senha.length < 8) {
        e.preventDefault();
        alert('A senha deve ter no mínimo 8 caracteres');
        return false;
    }
    
    if (!/[A-Z]/.test(senha)) {
        e.preventDefault();
        alert('A senha deve conter pelo menos uma letra maiúscula');
        return false;
    }
    
    if (!/[a-z]/.test(senha)) {
        e.preventDefault();
        alert('A senha deve conter pelo menos uma letra minúscula');
        return false;
    }
    
    if (!/[0-9]/.test(senha)) {
        e.preventDefault();
        alert('A senha deve conter pelo menos um número');
        return false;
    }
});
</script>
{% endblock %}